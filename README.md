
<div align="center">
<h1 align="center">
<img src="https://raw.githubusercontent.com/PKief/vscode-material-icon-theme/ec559a9f6bfd399b82bb44393651661b08aaf7ba/icons/folder-markdown-open.svg" width="100" />
<br>TFG
</h1>
<h3>‚ó¶ Unlock your potential with TFG!</h3>
<h3>‚ó¶ Developed with the software and tools listed below.</h3>

<p align="center">
<img src="https://img.shields.io/badge/Streamlit-FF4B4B.svg?style&logo=Streamlit&logoColor=white" alt="Streamlit" />
<img src="https://img.shields.io/badge/Python-3776AB.svg?style&logo=Python&logoColor=white" alt="Python" />
<img src="https://img.shields.io/badge/pandas-150458.svg?style&logo=pandas&logoColor=white" alt="pandas" />
<img src="https://img.shields.io/badge/Markdown-000000.svg?style&logo=Markdown&logoColor=white" alt="Markdown" />
<img src="https://img.shields.io/badge/JSON-000000.svg?style&logo=JSON&logoColor=white" alt="JSON" />
</p>
<img src="https://img.shields.io/github/languages/top/Valkam-Git/TFG?style&color=5D6D7E" alt="GitHub top language" />
<img src="https://img.shields.io/github/languages/code-size/Valkam-Git/TFG?style&color=5D6D7E" alt="GitHub code size in bytes" />
<img src="https://img.shields.io/github/commit-activity/m/Valkam-Git/TFG?style&color=5D6D7E" alt="GitHub commit activity" />
<img src="https://img.shields.io/github/license/Valkam-Git/TFG?style&color=5D6D7E" alt="GitHub license" />
</div>

---

## üìí Table of Contents
- [üìí Table of Contents](#-table-of-contents)
- [üìç Overview](#-overview)
- [üìÇ Project Structure](#project-structure)

- [üöÄ Getting Started](#-getting-started)
- [üó∫ Roadmap](#-roadmap)
- [üß© Modules](#modules)
- [ü§ù Contributing](#-contributing)
- [üìÑ License](#-license)
- [üëè Acknowledgments](#-acknowledgments)

---

## üìç Overview

This project is a comprehensive real estate application that provides a range of functionalities for property search, analysis, and management. It includes features for filtering and comparing properties, analyzing property and zone statistics, managing user profiles, and extracting and processing real estate data. 

The project aims to help users make informed property investment decisions by providing a user-friendly interface, data visualization, and an intuitive user experience. The value proposition lies in its ability to streamline the property search and analysis process, saving users time and effort while providing valuable insights and data-driven decision-making support.

---

## üìÇ Project Structure

It consists of 4 parts, each providing a crucial functionality:

 - Extraction, which extracts the property and zone data of Fotocasa using advanced scraping and preprocessing.
 - Processing, to add new valuable metrics which can be useful for the users.
 - RPC server to communicate the server with the main database (MongoDB) to the website client.
 - Finally, the website, created with Django and Streamlit to offer a friendly and interactive user interface.

---

## üöÄ Getting Started

### ‚úîÔ∏è Prerequisites

Before you begin, ensure that you have Python 3.10 installed.

### üì¶ Installation

1. Clone the TFG repository:
```sh
git clone https://github.com/Valkam-Git/TFG
```

2. Change to the project directory:
```sh
cd TFG
```

3. Install the dependencies:
```sh
pip install -r requirements.txt
```

### üéÆ Using TFG

### As website

Create your own fork, remove all folders except demo_pagina, and upload it to Streamlit Community, which offers free hosting, afterwards simply access the given url!

#### Locally

For a quick demo, you can run

```sh
streamlit/demo_pagina/pages/website.py
```

Otherwise, you will need to start the RPC server and then the website, which can be done using

```sh
python management.py --todo
```

---

## üß© Modules

<details closed><summary>Root</summary>

| File                                                                                                               | Summary                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ---                                                                                                                | ---                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [management.py](https://github.com/Valkam-Git/TFG/blob/main/management.py)                                         | This code snippet is a script that manages a server and a database. It accepts two arguments: "collectdata", which calls the data extraction and processing modules, and "startserver", which starts a RPC server. There is also a condition for another argument "Todo", which starts the server, runs a Django manage.py server, and runs a Streamlit frontend.                                                                                                                                                                                                                                                                                        |
| [style.css](https://github.com/Valkam-Git/TFG/blob/main/demo_pagina\style.css)                                     | The code snippet provides CSS styles for different elements in an HTML page. It includes styles for padding, font-size, background, visibility, display, and alignment. It also includes styles for specific elements with data-testid attributes. The code modifies the appearance of various components and containers.                                                                                                                                                                                                                                                                                                                                |
| [calculator.py](https://github.com/Valkam-Git/TFG/blob/main/demo_pagina\pages\calculator.py)                       | This code snippet is for a calculator-like application built using Streamlit. It allows users to estimate property investments by inputting various financial parameters such as property price, salary, savings, years of mortgage, interest rate, expenses, taxes, etc. The application then calculates metrics like total investment, mortgage details, percentage of salary, and net profitability.                                                                                                                                                                                                                                                  |
| [property_finder.py](https://github.com/Valkam-Git/TFG/blob/main/demo_pagina\pages\property_finder.py)             | The code snippet is a Streamlit application for a housing property search feature. Users can filter properties based on various criteria such as city, zone, property type, number of rooms, size, price, floor, and elevator availability. The filtered properties are displayed in an interactive table using the st_aggrid library. Users can click on a property to get more details and view the property listing.                                                                                                                                                                                                                                  |
| [property_statistics.py](https://github.com/Valkam-Git/TFG/blob/main/demo_pagina\pages\property_statistics.py)     | This code snippet is used to calculate the statistics of a property in comparison with others on its neighbourhood.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [user_profile.py](https://github.com/Valkam-Git/TFG/blob/main/demo_pagina\pages\user_profile.py)                   | The provided code snippet is a Streamlit application for managing user profile data and displaying favorite properties. It allows users to input and update their name, email, age, salary, savings, and maximum investment limit. Users can also select their bank and autonomous community. The application retrieves and displays the user's favorite properties based on their selected community and filters properties by zone, city, property type, number of rooms, and number of bathrooms. Users can view property details and click on a link to see the property ad. It uses the st_aggrid library to show the properties in a table format. |
| [website.py](https://github.com/Valkam-Git/TFG/blob/main/demo_pagina\pages\website.py)                             | This code snippet initializes a Streamlit app for InversApp, a property search and analysis tool. It sets up the UI layout with headings, logo, and four columns representing different functionalities: property finder, property statistics, zone finder, and user data management. The code also adds some empty space for visual separation.                                                                                                                                                                                                                                                                                                         |
| [zone_finder.py](https://github.com/Valkam-Git/TFG/blob/main/demo_pagina\pages\zone_finder.py)                     | This code snippet imports necessary libraries and defines the core functionalities for a "Zone Comparator" application. The application allows users to compare various zones based on rental or sales statistics. It displays the data in a table and also provides a bar chart for visualization. Users can select specific zones and sort the data based on selected statistics. The code also handles error scenarios related to internet connectivity.                                                                                                                                                                                              |
| [zone_statistics.py](https://github.com/Valkam-Git/TFG/blob/main/demo_pagina\pages\zone_statistics.py)             | The code snippet is a Streamlit application that allows users to analyze and compare various statistics of a selected zone. It retrieves zone and property data, calculates average prices, ROI, amenities, taxes, expenses, and rental income. It also displays the selected zone on a map. If an error occurs, it notifies the user. Users can switch back to the previous page.                                                                                                                                                                                                                                                                       |
| [utils.py](https://github.com/Valkam-Git/TFG/blob/main/demo_pagina\pages\modules\utils.py)                         | Module used for generic functions such as requesting data.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [extraction.py](https://github.com/Valkam-Git/TFG/blob/main/extraction\extraction.py)                              | Module used to extract data from both properties and zones.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [preprocessing.py](https://github.com/Valkam-Git/TFG/blob/main/extraction\properties\preprocessing.py)             | This code snippet connects to a MongoDB database and provides various functionalities for working with real estate properties. It includes functions for retrieving top subzones, getting locations for a given autonomous community, exploding attribute data, preprocessing the properties, removing duplicates, and saving the data to CSV, JSON, or MongoDB.                                                                                                                                                                                                                                                                                         |
| [property_extraction.py](https://github.com/Valkam-Git/TFG/blob/main/extraction\properties\property_extraction.py) | This code snippet performs property extraction for a given location. It retrieves data from the web, preprocesses it, appends it to a file and saves it to MongoDB. It supports location and autonomous community parameters for data retrieval.                                                                                                                                                                                                                                                                                                                                                                                                         |
| [scraping.py](https://github.com/Valkam-Git/TFG/blob/main/extraction\properties\scraping.py)                       | This code snippet provides functionalities for web scraping using Selenium and BeautifulSoup. It includes methods for creating and refreshing a web driver, removing cookie banners and annoying ads, handling server kicks, navigating pages and searching locations, scrolling down to load more content, extracting property data from the page, and scraping properties from multiple pages.                                                                                                                                                                                                                                                         |
| [preprocessing.py](https://github.com/Valkam-Git/TFG/blob/main/extraction\zones\preprocessing.py)                  | The code snippet loads provinces from a JSON file, updates zone names and autonomous communities, loads zones from a MongoDB collection, updates zones with province names and autonomous communities, and inserts the updated zones into the collection.                                                                                                                                                                                                                                                                                                                                                                                                |
| [scraping.py](https://github.com/Valkam-Git/TFG/blob/main/extraction\zones\scraping.py)                            | The code snippet is a script used to extract zone information from the Fotocasa website and save it in a CSV file. It uses web scraping techniques to navigate through the website, retrieve province information, and recursively gather subzones and their statistics. The extracted data is then stored in a MongoDB collection.                                                                                                                                                                                                                                                                                                                      |
| [zone_extraction.py](https://github.com/Valkam-Git/TFG/blob/main/extraction\zones\zone_extraction.py)              | The code snippet extracts information from different locations on a website called Fotocasa. It includes functions for name extraction and preprocessing of the data. The process can be time-consuming and might overwrite any previously saved information.                                                                                                                                                                                                                                                                                                                                                                                            |
| [db.sqlite3](https://github.com/Valkam-Git/TFG/blob/main/pagina\db.sqlite3)                                        | The provided code snippet contains a function that takes in three parameters: a list of numbers, a start index, and an end index. It then returns a new list containing the numbers from the original list that fall within the specified range.                                                                                                                                                                                                                                                                                                                                                                                                         |
| [manage.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\manage.py)                                          | This code snippet is the main entry point for running administrative tasks in a Django project. It sets the Django settings module, imports the necessary modules, and executes the command-line arguments passed to it.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [style.css](https://github.com/Valkam-Git/TFG/blob/main/pagina\frontend\style.css)                                 | This CSS code snippet defines various styles for different elements on a web page. It includes styles for container padding, font size, background, visibility, and font size of specific elements. It also modifies the alignment and styling of certain components.                                                                                                                                                                                                                                                                                                                                                                                    |
| [calculator.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\frontend\pages\calculator.py)                   | The code snippet is for a calculator application that allows users to input various financial parameters, such as property price, salary, savings, interest rate, expenses, and more. It calculates metrics such as the total investment, mortgage amount, monthly payment, total mortgage, percentage of salary, net profit, and net profit rate. It also includes error handling for internet connection issues.                                                                                                                                                                                                                                       |
| [property_finder.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\frontend\pages\property_finder.py)         | This code snippet is a Streamlit web app for a housing property search. It allows users to filter properties based on city, zone, type, rooms, square meters, and price. The filtered data is displayed in an interactive table. Clicking on a property shows more details and a link to the property listing.                                                                                                                                                                                                                                                                                                                                           |
| [property_statistics.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\frontend\pages\property_statistics.py) | This code snippet is used to calculate the statistics of a property in comparison with others on its neighbourhood.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [user_profile.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\frontend\pages\user_profile.py)               | The provided code is for a user profile page where users can manage their data, preferences, and favorite properties. It includes input fields for user details like name, email, age, salary, savings, and maximum investment. Users can also select their bank and community. The code also displays a table of favorite properties that can be filtered based on various criteria. Users can view details of a selected property and access its advertisement.                                                                                                                                                                                        |
| [website.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\frontend\pages\website.py)                         | This code snippet is for a Streamlit app called InversApp. It imports necessary modules and sets up the app's CSS style. It then initializes the session state and creates a container with a semi-transparent background. The app displays a welcome message, an image, and four columns with different functionalities related to property finding, property statistics, zone statistics, and user data management.                                                                                                                                                                                                                                    |
| [zone_finder.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\frontend\pages\zone_finder.py)                 | This code snippet is a Streamlit application that allows users to compare and visualize data about different zones. The application retrieves zone data, displays it in a tabular format, and provides options to filter, select statistics, and compare zones. It also includes a bar chart visualization for comparison.                                                                                                                                                                                                                                                                                                                               |
| [zone_statistics.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\frontend\pages\zone_statistics.py)         | This code snippet utilizes various modules and functions to display statistics and details about a selected zone. It starts by retrieving zone and property data, then calculates and displays metrics such as average price, ROI, price per square meter, and more. It also compares the selected zone with other zones in the city. Additionally, it provides information about property amenities, taxes, annual expenses, and rental income. It includes an interactive map displaying the selected zone's location. User-friendly buttons are available for navigation.                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [asgi.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapp\asgi.py)                                    | The code snippet is a Django ASGI configuration file that exposes the ASGI (Asynchronous Server Gateway Interface) callable as a module-level variable named "application". It sets the default Django settings module to "inversapp.settings" and retrieves the ASGI application. This file is used for deploying the Django application with ASGI servers.                                                                                                                                                                                                                                                                                             |
| [settings.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapp\settings.py)                            | This code snippet is the Django project settings file. It includes configuration for database, internationalization, static files, middleware, and installed apps. It also sets the secret key and debug mode. Additionally, it defines the template backends and default primary key field type.                                                                                                                                                                                                                                                                                                                                                        |
| [urls.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapp\urls.py)                                    | The code snippet defines URL configurations for the inversapp project. It sets up the routes for two views: get_zone_data and get_property_data. It utilizes the path function from Django's urlpatterns to map URLs to corresponding view functions.                                                                                                                                                                                                                                                                                                                                                                                                    |
| [wsgi.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapp\wsgi.py)                                    | This code snippet is the WSGI configuration file for the inversonapp Django project. It sets up the WSGI callable and assigns it to the variable "application". The code also specifies the Django project's settings module and sets it as the default environment variable. Summary: WSGI configuration for the inversonapp Django project, setting up the WSGI callable and default environment variable for the settings module.                                                                                                                                                                                                                     |
| [admin.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapprpc\admin.py)                               | The code imports the Django admin module and registers models in the admin panel.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [apps.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapprpc\apps.py)                                 | The code snippet configures the "inversapprpc" app in a Django project, defining the default database field and assigning a unique name to the app.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [models.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapprpc\models.py)                             | The provided code snippet imports the models module from django.db and indicates the creation of models in the code file. The snippet is otherwise incomplete and doesn't contain any specific model definition or functionality.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [RealEstate.ice](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapprpc\RealEstate.ice)                   | The code defines a RealEstate module with an exception called GenericError. It also declares an interface RealEstateInterface, which includes the methods getZoneData() and getPropertyData(). Together, these define the core functionalities of the module.                                                                                                                                                                                                                                                                                                                                                                                            |
| [RealEstate_ice.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapprpc\RealEstate_ice.py)             | The code snippet is a module that defines the functionality of a real estate interface. It includes methods for retrieving zone data and property data. It also defines exception classes for handling generic errors.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [rpc_server.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapprpc\rpc_server.py)                     | The code snippet creates a server application that implements the RealEstateInterface. It uses MongoDB to query and access data on properties and zones. The server exposes two functions, getZoneData() and getPropertyData(), which return the respective data in JSON format. The server runs on port 12545 and can be started by executing the code.                                                                                                                                                                                                                                                                                                 |
| [tests.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapprpc\tests.py)                               | The code snippet imports the TestCase class from the Django test module and it‚Äôs responsible for creating tests in Django applications.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [views.py](https://github.com/Valkam-Git/TFG/blob/main/pagina\inversapprpc\views.py)                               | This code snippet establishes a connection with an RPC server, retrieves datasets, and provides endpoint functions for retrieving zone and property data. It also includes functions for filtering and processing properties based on frontend data.                                                                                                                                                                                                                                                                                                                                                                                                     |
| [loader.py](https://github.com/Valkam-Git/TFG/blob/main/processing\loader.py)                                      | This code snippet provides functionalities for loading, processing, and linking real estate data from a MongoDB database to a pandas DataFrame. It includes functions for loading properties and zones, handling NaN values, updating properties for each zone, and linking properties and zones datasets. It also includes functions for finding zones for a given property, finding zones by name and city, and saving data to CSV files or MongoDB.                                                                                                                                                                                                   |
| [processing.py](https://github.com/Valkam-Git/TFG/blob/main/processing\processing.py)                              | The code snippet loads properties and zones data, links datasets, updates statistics, predicts property clusters, updates zone dataset, and saves the updated data to CSV files.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [property_statistics.py](https://github.com/Valkam-Git/TFG/blob/main/processing\property_statistics.py)            | This code snippet processes and updates a DataFrame of properties. It adds various statistics and metrics, such as ITP, transfer taxes, insurance, IBI, community costs, maintenance costs, and more. It also predicts the cluster of each property using K-means clustering based on the price.                                                                                                                                                                                                                                                                                                                                                         |
| [zone_statistics.py](https://github.com/Valkam-Git/TFG/blob/main/processing\zone_statistics.py)                    | The code snippet updates statistics for zones based on properties. It calculates profitability, averages, and clusters prices. It also normalizes binary stats and handles empty zone properties.                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [RealEstate.ice](https://github.com/Valkam-Git/TFG/blob/main/rpc_server\RealEstate.ice)                            | The provided code includes a RealEstate module with an exception class and an interface. The interface, RealEstateInterface, has two methods: getZoneData returns information about zoning, and getPropertyData returns information about properties. The code is designed to handle generic errors.                                                                                                                                                                                                                                                                                                                                                     |
| [RealEstate_ice.py](https://github.com/Valkam-Git/TFG/blob/main/rpc_server\RealEstate_ice.py)                      | The code snippet provides a module called "RealEstate" which defines a RealEstateInterface. The interface includes two methods: getZoneData and getPropertyData. It also provides a Proxy class for the interface, allowing checked and unchecked casting. The code utilizes Ice, a communication protocol framework.                                                                                                                                                                                                                                                                                                                                    |
| [rpc_server.py](https://github.com/Valkam-Git/TFG/blob/main/rpc_server\rpc_server.py)                              | The provided code snippet is a server implementation for a Real Estate application. It connects to a MongoDB database and provides two functionalities:-getZoneData: Retrieves zone data from the database and returns it in JSON format.-getPropertyData: Retrieves property data from the database and returns it in JSON format.                                                                                                                                                                                                                                                                                                                      |

</details>

---

## ü§ù Contributing

Contributions are always welcome! Please follow these steps:
1. Fork the project repository. This creates a copy of the project on your account that you can modify without affecting the original project.
2. Clone the forked repository to your local machine using a Git client like Git or GitHub Desktop.
3. Create a new branch with a descriptive name (e.g., `new-feature-branch` or `bugfix-issue-123`).
```sh
git checkout -b new-feature-branch
```
4. Make changes to the project's codebase.
5. Commit your changes to your local branch with a clear commit message that explains the changes you've made.
```sh
git commit -m 'Implemented new feature.'
```
6. Push your changes to your forked repository on GitHub using the following command
```sh
git push origin new-feature-branch
```
7. Create a new pull request to the original project repository. In the pull request, describe the changes you've made and why they're necessary.
The project maintainers will review your changes and provide feedback or merge them into the main branch.

---

## üìÑ License

This project is licensed under the `‚ÑπÔ∏è  MIT` License. See the [LICENSE](https://github.com/Valkam-Git/TFG/blob/Final/LICENSE) file for additional info.

---

## üëè Acknowledgments

> - `‚ÑπÔ∏è  Juan Mario Haut, who helped immensely to bring this project to life.`

---
